{"version":3,"file":"web.js","sourceRoot":"","sources":["../../src/web.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport { WebPlugin } from '@capacitor/core';\n\nimport type { FacebookPlugin } from './definitions';\n\ndeclare global {\n    interface Window { fbAsyncInit: any; FB: any; fbq: any; _fbq: any }\n}\ndeclare var FB: any;\n\nexport class FacebookWeb extends WebPlugin implements FacebookPlugin {\n    async logEvent(options: { name: string; valueToSum: number | void; bundle: void | Record<string, unknown>; }): Promise<void> {\n        window.fbq(options.name, options.valueToSum, options.bundle)\n    }\n    init(options: { appId: string; autoLogEvent: boolean, pixelId: string | void }): Promise<void> {\n        return new Promise((resolve) => {\n            window.fbAsyncInit = function () {\n                FB.init({\n                    appId: options.appId,\n                    cookie: true,\n                    xfbml: true,\n                    version: 'v15.0'\n                });\n                FB.AppEvents.logPageView();\n            };\n            if (!document.getElementById('facebook-jssdk')) {\n                var js = document.createElement('script');\n                js.id = 'facebook-jssdk';\n                js.setAttribute('src', \"https://connect.facebook.net/en_US/sdk.js\");\n                js.onload = () => {\n                    resolve()\n                }\n                document.body.appendChild(js);\n            }\n            if (options.pixelId) {\n                if (!document.querySelector('#fb_pixel')) {\n                    let n: any = (window.fbq = function () {\n                        n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments)\n                    })\n                    if (!window._fbq) window._fbq = n\n                    n.push = n\n                    n.loaded = !0\n                    n.version = '2.0'\n                    n.queue = []\n                    let script = document.createElement('script')\n                    script.setAttribute('src', 'https://connect.facebook.net/en_US/fbevents.js')\n                    document.body.appendChild(script)\n                    window.fbq('init', options.pixelId)\n                }\n            }\n        })\n\n    }\n    async login(options: { scope: string[] | null }): Promise<any> {\n        // FB.getLoginStatus((response: any) => {\n        //     console.log(response)\n        // });\n        options = options || {};\n        if (!options.scope || options.scope.length === 0) {\n            options.scope = ['public_profile', 'email'];\n        }\n        FB.login((response: any) => {\n            console.log(response)\n        }, { scope: options.scope.join(',') });\n    }\n}\n"]}